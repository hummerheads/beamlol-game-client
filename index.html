<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeamLOL</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdn.tailwindcss.com">
</head>
<body>
    <h1>Welcome to Our Game!</h1>

    <script>
        // Check if Telegram Web App API is available
        if (window.Telegram && window.Telegram.WebApp) {
            // Automatically expand to full screen when the page loads
            window.Telegram.WebApp.expand();

            // Get user ID from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const userId = urlParams.get('user_id');

            console.log("User's Telegram ID:", userId); // Log the user ID

            if (!userId) {
                console.error("User ID is null or undefined");
            } else {
                // Send user ID to your server
                fetch("https://beam-lol-server.vercel.app/api/allusers", { // Change this URL based on your deployment
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ telegram_ID: userId }), // Send as an object
                })
                .then(response => response.json())
                .then(data => {
                    console.log("Response from server:", data);
                })
                .catch(error => {
                    console.error("Error adding user:", error);
                });
            }
        } else {
            console.error("Telegram WebApp API is not available");
        }
    </script>
</body>
</html>